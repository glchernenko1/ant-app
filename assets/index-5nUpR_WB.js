import{r as re,a as oe,g as ae,T as L,F as g,S as M,b as C,c as h,d as J,D as O,C as ce,B as S,R as V,e as ee,f as te,h as T,i as K,j as se,k as Y,I as le,s as I,L as ne,l as ie}from"./vendor-GIG5oWRj.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))y(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&y(r)}).observe(document,{childList:!0,subtree:!0});function c(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function y(a){if(a.ep)return;a.ep=!0;const n=c(a);fetch(a.href,n)}})();var D={exports:{}},P={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G;function de(){if(G)return P;G=1;var t=re(),s=Symbol.for("react.element"),c=Symbol.for("react.fragment"),y=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function r(_,d,b){var i,o={},m=null,p=null;b!==void 0&&(m=""+b),d.key!==void 0&&(m=""+d.key),d.ref!==void 0&&(p=d.ref);for(i in d)y.call(d,i)&&!n.hasOwnProperty(i)&&(o[i]=d[i]);if(_&&_.defaultProps)for(i in d=_.defaultProps,d)o[i]===void 0&&(o[i]=d[i]);return{$$typeof:s,type:_,key:m,ref:p,props:o,_owner:a.current}}return P.Fragment=c,P.jsx=r,P.jsxs=r,P}var Q;function ge(){return Q||(Q=1,D.exports=de()),D.exports}var e=ge(),q={},X;function he(){if(X)return q;X=1;var t=oe();return q.createRoot=t.createRoot,q.hydrateRoot=t.hydrateRoot,q}var me=he();const ue=ae(me),xe=["USD","EUR","RUB"],pe=["Binance","Bybit"],fe={Binance:["Tinkoff","Sberbank","Raiffeisen","Alfa Bank"],Bybit:["Tinkoff","Sberbank","Raiffeisen","Alfa Bank"]},A="fiat_settings",F={getFiats:async()=>Promise.resolve(xe),getExchanges:async()=>Promise.resolve(pe),getBanks:async(t,s)=>Promise.resolve(fe[s]||[]),getSavedSettings:()=>{const t=localStorage.getItem(A);return t?JSON.parse(t):{}},saveSettings:t=>{const s=F.getSavedSettings();s[t.name]=t,localStorage.setItem(A,JSON.stringify(s))},createFiat:async t=>(console.log("Creating fiat:",t),F.saveSettings(t),Promise.resolve()),createSoup:async(t,s)=>{console.log("Creating soup for fiat:",t,s);const c=F.getSavedSettings();return c[t]&&(c[t].exchange_soups.push(s),localStorage.setItem(A,JSON.stringify(c))),Promise.resolve()},createExchangeParser:async(t,s)=>(console.log("Creating exchange parser for soup:",t,s),Promise.resolve()),deleteFiat:async t=>{console.log("Deleting fiat:",t);const s=F.getSavedSettings();return delete s[t],localStorage.setItem(A,JSON.stringify(s)),Promise.resolve()},deleteExchangeParser:async t=>(console.log("Deleting exchange parser:",t),Promise.resolve()),deleteSoup:async t=>(console.log("Deleting soup:",t),Promise.resolve())},{Text:R}=L,N=({initialValues:t,onChange:s,mode:c="edit"})=>{const[y]=g.useForm(),a=(_,d)=>{s==null||s(d)};return c==="view"?e.jsxs(M,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(R,{strong:!0,children:"Min Amount:"})," ",t==null?void 0:t.min_amount]}),e.jsxs("div",{children:[e.jsx(R,{strong:!0,children:"Max Amount:"})," ",t==null?void 0:t.max_amount]}),e.jsxs("div",{children:[e.jsx(R,{strong:!0,children:"Min Price:"})," ",t==null?void 0:t.min_price]}),e.jsxs("div",{children:[e.jsx(R,{strong:!0,children:"Max Price:"})," ",t==null?void 0:t.max_price]}),e.jsxs("div",{children:[e.jsx(R,{strong:!0,children:"Payment Methods:"})," ",t==null?void 0:t.payment_methods.join(", ")]})]}):e.jsxs(g,{form:y,layout:"vertical",initialValues:t,onValuesChange:a,children:[e.jsx(g.Item,{label:"Min Amount",name:"min_amount",rules:[{required:!0,message:"Please input min amount!"}],children:e.jsx(C,{style:{width:"100%"},min:0})}),e.jsx(g.Item,{label:"Max Amount",name:"max_amount",rules:[{required:!0,message:"Please input max amount!"}],children:e.jsx(C,{style:{width:"100%"},min:0})}),e.jsx(g.Item,{label:"Min Price",name:"min_price",rules:[{required:!0,message:"Please input min price!"}],children:e.jsx(C,{style:{width:"100%"},min:0})}),e.jsx(g.Item,{label:"Max Price",name:"max_price",rules:[{required:!0,message:"Please input max price!"}],children:e.jsx(C,{style:{width:"100%"},min:0})})]})},{Title:ye}=L,Z=({fiat:t,initialValues:s,onChange:c,mode:y="view",exchangeName:a})=>{const[n]=g.useForm(),[r,_]=h.useState([]),[d,b]=h.useState([]),[i,o]=h.useState(a||""),[m,p]=h.useState(y==="edit"),[E,U]=h.useState(!0);h.useEffect(()=>{F.getExchanges().then(_)},[t]),h.useEffect(()=>{i&&F.getBanks(t,i).then(b)},[i,t]),h.useEffect(()=>{s&&(n.setFieldsValue(s),o(s.exchange_name))},[s,n]);const k=(l,x)=>{E&&x.filter_buy&&(x.filter_sell={...x.filter_buy}),c==null||c(x)},f=()=>{p(!m)},u=l=>{if(U(l.target.checked),l.target.checked){const x=n.getFieldValue("filter_buy");x&&(n.setFieldsValue({filter_sell:{...x}}),k(null,n.getFieldsValue()))}};return m?e.jsxs(g,{form:n,layout:"vertical",initialValues:s,onValuesChange:k,children:[e.jsx(g.Item,{label:"Banks",name:"banks",rules:[{required:!0,message:"Please select banks!"}],children:e.jsx(J,{mode:"multiple",options:d.map(l=>({label:l,value:l})),disabled:!i,placeholder:"Select banks"})}),e.jsx(O,{style:{margin:"12px 0"},children:"Buy Filter"}),e.jsx(N,{initialValues:s==null?void 0:s.filter_buy,onChange:l=>{n.setFieldsValue({filter_buy:l}),E&&n.setFieldsValue({filter_sell:{...l}}),k(null,n.getFieldsValue())},mode:"edit"}),e.jsx(g.Item,{children:e.jsx(ce,{checked:E,onChange:u,children:"Use same settings for sell filter"})}),!E&&e.jsxs(e.Fragment,{children:[e.jsx(O,{style:{margin:"12px 0"},children:"Sell Filter"}),e.jsx(N,{initialValues:s==null?void 0:s.filter_sell,onChange:l=>{n.setFieldsValue({filter_sell:l}),k(null,n.getFieldsValue())},mode:"edit"})]}),e.jsx(g.Item,{children:e.jsx(S,{type:"primary",icon:e.jsx(V,{}),onClick:f,block:!0,children:"Save Changes"})})]}):(()=>{var l;return e.jsxs(M,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(ye,{level:5,style:{margin:0},children:i}),e.jsx(S,{type:"text",icon:e.jsx(ee,{}),onClick:f})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Banks:"})," ",(l=n.getFieldValue("banks"))==null?void 0:l.join(", ")]}),e.jsx(O,{style:{margin:"12px 0"},children:"Buy Filter"}),e.jsx(N,{initialValues:s==null?void 0:s.filter_buy,onChange:x=>{n.setFieldsValue({filter_buy:x}),E&&n.setFieldsValue({filter_sell:{...x}}),k(null,n.getFieldsValue())},mode:"view"}),!E&&e.jsxs(e.Fragment,{children:[e.jsx(O,{style:{margin:"12px 0"},children:"Sell Filter"}),e.jsx(N,{initialValues:s==null?void 0:s.filter_sell,onChange:x=>{n.setFieldsValue({filter_sell:x}),k(null,n.getFieldsValue())},mode:"view"})]})]})})()},{Panel:je}=te,_e={exchange_name:"",banks:[],filter_buy:{min_amount:0,max_amount:0,min_price:0,max_price:0,payment_methods:[]},filter_sell:{min_amount:0,max_amount:0,min_price:0,max_price:0,payment_methods:[]}},ve=({fiat:t,initialValues:s,onChange:c,mode:y="view",isNew:a=!1,onRemove:n})=>{const[r]=g.useForm(),[_,d]=h.useState([]),[b,i]=h.useState(y==="edit"||a);h.useEffect(()=>{s&&r.setFieldsValue(s)},[s,r]),h.useEffect(()=>{F.getExchanges().then(d)},[t]);const o=(f,u)=>{c==null||c(u)},m=(f,u)=>{const j=[...r.getFieldValue("exchanges")||[]];j[f]=u,r.setFieldsValue({exchanges:j}),o(null,{...r.getFieldsValue(),exchanges:j})},p=()=>{const u=[...r.getFieldValue("exchanges")||[],{..._e}];r.setFieldsValue({exchanges:u}),o(null,{...r.getFieldsValue(),exchanges:u})},E=f=>{if((r.getFieldValue("exchanges")||[]).length===1){I.warning("At least one exchange is required");return}const v=(r.getFieldValue("exchanges")||[]).filter((j,l)=>l!==f);r.setFieldsValue({exchanges:v}),o(null,{...r.getFieldsValue(),exchanges:v})};return b?e.jsx(T,{style:{marginBottom:16},headStyle:{background:"#fafafa"},title:e.jsx(g,{form:r,layout:"inline",initialValues:s,style:{margin:0},children:e.jsx(g.Item,{name:"name",rules:[{required:!0,message:"Please input soup name!"}],style:{margin:0},children:e.jsx(le,{placeholder:"Enter soup name",bordered:!1,style:{fontSize:22,fontWeight:600,width:200}})})}),extra:e.jsxs(M,{children:[e.jsx(S,{type:"text",icon:e.jsx(V,{}),onClick:()=>i(!1)}),e.jsx(S,{type:"text",danger:!0,icon:e.jsx(Y,{}),onClick:n})]}),children:e.jsxs(g,{form:r,layout:"vertical",initialValues:s,onValuesChange:o,children:[e.jsx(g.Item,{label:e.jsx("span",{style:{fontWeight:600},children:"Average"}),name:"average",rules:[{required:!0,message:"Please input average!"}],children:e.jsx(C,{style:{width:"100%"},placeholder:"Enter average value",min:0})}),e.jsx(g.List,{name:"exchanges",children:(f,{add:u,remove:v})=>e.jsxs(e.Fragment,{children:[f.map((j,l)=>{var x,$,W,z,H;return e.jsx(T,{type:"inner",title:e.jsx(J,{style:{minWidth:160},placeholder:"Choose exchange",value:(($=(x=r.getFieldValue("exchanges"))==null?void 0:x[l])==null?void 0:$.exchange_name)||void 0,onChange:w=>{const B=[...r.getFieldValue("exchanges")||[]];B[l]={...B[l],exchange_name:w},r.setFieldsValue({exchanges:B}),o(null,{...r.getFieldsValue(),exchanges:B})},options:_.map(w=>({label:w,value:w}))}),style:{marginBottom:16},extra:(r.getFieldValue("exchanges")||[]).length>1&&e.jsx(S,{type:"text",danger:!0,icon:e.jsx(K,{}),onClick:()=>{v(j.name),E(l)}}),children:e.jsx(Z,{fiat:t,initialValues:(W=r.getFieldValue("exchanges"))==null?void 0:W[l],exchangeName:(H=(z=r.getFieldValue("exchanges"))==null?void 0:z[l])==null?void 0:H.exchange_name,onChange:w=>m(l,w),mode:"edit"})},j.key)}),e.jsx(g.Item,{children:e.jsx(S,{type:"dashed",onClick:()=>{u(),p()},block:!0,icon:e.jsx(se,{}),children:"Add Exchange"})})]})})]})}):(()=>{var f;return e.jsxs(T,{style:{marginBottom:16},headStyle:{background:"#fafafa"},title:(s==null?void 0:s.name)||"Exchange Soup",extra:e.jsxs(M,{children:[e.jsx(S,{type:"text",icon:e.jsx(ee,{}),onClick:()=>i(!0)}),e.jsx(S,{type:"text",danger:!0,icon:e.jsx(Y,{}),onClick:n})]}),children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("strong",{children:"Average:"})," ",s==null?void 0:s.average]}),e.jsx(te,{children:(f=r.getFieldValue("exchanges"))==null?void 0:f.map((u,v)=>e.jsx(je,{header:u.exchange_name||`Exchange ${v+1}`,extra:(r.getFieldValue("exchanges")||[]).length>1&&e.jsx(S,{type:"text",danger:!0,icon:e.jsx(K,{}),onClick:j=>{j.stopPropagation(),E(v)}}),children:e.jsx(Z,{fiat:t,initialValues:u,exchangeName:u.exchange_name,onChange:j=>m(v,j),mode:"view"})},v))})]})})()},{Header:Se,Content:Fe}=ne,{Title:Ee}=L,be=()=>{const[t,s]=h.useState([]),[c,y]=h.useState(),[a,n]=h.useState([]);h.useEffect(()=>{F.getFiats().then(s)},[]),h.useEffect(()=>{if(c){const o=F.getSavedSettings();o[c]?n(o[c].exchange_soups):n([])}},[c]);const r=o=>{y(o)},_=(o,m)=>{const p=[...a];p[o]=m,n(p)},d=()=>{const o={name:"",average:0,exchanges:[{exchange_name:"",banks:[],filter_buy:{min_amount:0,max_amount:0,min_price:0,max_price:0,payment_methods:[]},filter_sell:{min_amount:0,max_amount:0,min_price:0,max_price:0,payment_methods:[]}}]};n([...a,o])},b=o=>{n(a.filter((m,p)=>p!==o))},i=async()=>{if(!c){I.error("Please select a fiat");return}if(a.length===0){I.error("Please add at least one exchange soup");return}try{const o={name:c,exchange_soups:a};await F.createFiat(o),I.success("Fiat settings saved successfully")}catch{I.error("Failed to save fiat settings")}};return e.jsxs(ne,{style:{minHeight:"100vh"},children:[e.jsx(Se,{style:{background:"#fff",padding:"0 24px",boxShadow:"0 2px 8px rgba(0,0,0,0.06)"},children:e.jsx(Ee,{level:3,style:{margin:"16px 0"},children:"Server Settings"})}),e.jsx(Fe,{style:{padding:"24px",maxWidth:1200,margin:"0 auto",width:"100%"},children:e.jsx(T,{children:e.jsxs(M,{direction:"vertical",style:{width:"100%"},size:"large",children:[e.jsx(J,{style:{width:200},placeholder:"Select Fiat",value:c,onChange:r,options:t.map(o=>({label:o,value:o}))}),c&&e.jsxs(e.Fragment,{children:[a.map((o,m)=>e.jsx(ve,{fiat:c,initialValues:o,onChange:p=>_(m,p),isNew:o.name==="",onRemove:()=>b(m)},m)),e.jsx(S,{type:"dashed",onClick:d,block:!0,icon:e.jsx(se,{}),children:"Add Exchange Soup"}),e.jsx(S,{type:"primary",onClick:i,block:!0,children:"Save Settings"})]})]})})})]})};ue.createRoot(document.getElementById("root")).render(e.jsx(ie.StrictMode,{children:e.jsx(be,{})}));
